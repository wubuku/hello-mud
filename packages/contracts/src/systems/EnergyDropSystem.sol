// SPDX-License-Identifier: MIT
pragma solidity >=0.8.24;

/* Autogenerated file. Do not edit manually. */

import { System } from "@latticexyz/world/src/System.sol";
import { EnergyDrop } from "../codegen/index.sol";
import { EnergyDropRequested } from "./EnergyDropEvents.sol";
import { EnergyDropRequestLogic } from "./EnergyDropRequestLogic.sol";
import { IAppSystemErrors } from "./IAppSystemErrors.sol";

contract EnergyDropSystem is System, IAppSystemErrors {
  event EnergyDropRequestedEvent(address indexed accountAddress, uint256 amount);

  function energyDropRequest(address accountAddress) public {
    uint64 lastDroppedAt = EnergyDrop.get(accountAddress);
    EnergyDropRequested memory energyDropRequested = EnergyDropRequestLogic.verify(accountAddress, lastDroppedAt);
    energyDropRequested.accountAddress = accountAddress;
    emit EnergyDropRequestedEvent(energyDropRequested.accountAddress, energyDropRequested.amount);
    uint64 updatedLastDroppedAt = EnergyDropRequestLogic.mutate(energyDropRequested, lastDroppedAt);
    EnergyDrop.set(accountAddress, updatedLastDroppedAt);
  }

}
