aggregates:
  Article:
    metadata:
      Preprocessors: ["CRUD_IT"]
    id:
      name: Id
      type: u64
      generator:
        class: sequence
        tableName: ArticleIdGenerator
    properties:
      Author:
        type: address # TODO throw if "FieldLayout: static type after dynamic type"
      Title:
        type: String
        length: 200
      Body:
        type: String
        length: 2000
      Comments:
        itemType: Comment
      Tags:
        itemType: String
        tableName: ArticleTag

    # methods:
    #   AddTag:
    #     parameters:
    #       Tag:
    #         type: u64

    entities:
      Comment:
        # metadata:
        # Preprocessors: [ "CRUD_IT" ]
        id:
          name: CommentSeqId
          type: u64
          generator:
            class: sequence
            structName: CommentSeqIdGenerator
        globalId:
          columnNames:
            - ArticleId
            - CommentSeqId
        properties:
          Commenter:
            type: String
            length: 100
          Body:
            type: String
            length: 500
